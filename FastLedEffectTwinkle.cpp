// ****************************************************************************
//  Filename: 
//
//  Author: JP Faucher (jonpaul.faucher@gmail.com)
// ****************************************************************************
//  Details:
//
//
//  Notes:
//
// ****************************************************************************
#include "FastLedEffectTwinkle.h"
#include "FastLedZone.h"

// ****************************************************************************
// Function:
// ****************************************************************************
// Arguments:
//
// ****************************************************************************
// Description:
//
// ****************************************************************************
// Notes:
//
// ****************************************************************************
FastLedEffectTwinkle::FastLedEffectTwinkle(FastLedZone *aZone) : 
  FastLedEffect("twinkle", aZone),
  mDelay(100),
  mCount(1)
{ 
}

// ****************************************************************************
// Function:
// ****************************************************************************
// Arguments:
//
// ****************************************************************************
// Description:
//
// ****************************************************************************
// Notes:
//
// ****************************************************************************
bool FastLedEffectTwinkle::init()
{ 
  set_brightness();
  return true; 
}

// ****************************************************************************
// Function:
// ****************************************************************************
// Arguments:
//
// ****************************************************************************
// Description:
//
// ****************************************************************************
// Notes:
//
// ****************************************************************************
bool FastLedEffectTwinkle::process() 
{
  EVERY_N_MILLISECONDS(mDelay)     
  {
    fill_solid_black();

    for(int lIndex = 0; lIndex < mCount; lIndex++)
      mZone->get_leds()[random(mZone->get_start_index(), 
                               mZone->get_end_index())] = mZone->get_color();
  }
  return false; 
}

// ****************************************************************************
// Function:
// ****************************************************************************
// Arguments:
//
// ****************************************************************************
// Description:
//
// ****************************************************************************
// Notes:
//
// ****************************************************************************
bool FastLedEffectTwinkle::end()  
{ 
  fill_solid_black();
  return true; 
}
